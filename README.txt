NH QUERY RECORDER


INTRODUCTION

Records SQL logged to the NHibernate.SQL log and converts each logged statement and parameter values to executable SQL. 

This is useful for recording a sequence of inserts / updates into a file, allowing it to be replayed, perhaps to generate a common set of demo data. 

On the project that motivated the creation of this project we use Fluent NHibernate automapping against a model that evolved rapidly in the early
stages. All developers work against databases on a local SQL Server instance, which can be regenerated by running a single batch file, which creates
the schema and runs a script generated by NHQueryRecorder to insert demo data into the database.


LIMITATIONS

There are a few (after 7h dev). This is at proof of concept stage and is not recommended for production use.
Supports Sql Server only (only tested against Sql2008 dialect)
Use file for SqlCommandProcessor tests, e.g. table with expected output for each dialect
Dodgy regexes: An insert statement updating a string field to the value of an NHibernate log message would cause a mess
Dates param values are only logged to second precision

TODO

Replace Regex with parser - Sprache
Or improve Regexes ('' in string param values and values like [Type or @p0 might trip it up at the moment). 
Support more dialects
Build script


ALTERNATIVES

NHProfiler records SQL and generates executable SQL, which you can copy / paste. I think you can automate it also. 
